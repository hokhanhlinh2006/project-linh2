<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√≠ danh s√°ch</title>
    <link rel="stylesheet" href="../css/category-manager.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>
<body>
    <style>
.form-container {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    z-index: 1001;
    width: 40%;
    border-radius: 10px;
}
.overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
}
.delete-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      z-index: 2000;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .delete-modal button {
      margin-left: 10px;
      padding: 5px 10px;
    }
    .toast {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #28a745;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 3000;
    }
    </style>
    <body>
        <div class="overlay"></div> 
        <div class="container">
            <div class="container">
                <aside class="sidebar">
                    <h2>üî• Ecommerce</h2>
                    <ul>
                        <li><i class="fas fa-chart-line"></i> Th·ªëng k√™</li>
                        <li onclick="window.location.href='dashboard.html'">
                            <i class="fas fa-list"></i> Danh m·ª•c
                        </li>
                        <li onclick="window.location.href='category-manager.html'" class="active">
                            <i class="fas fa-box"></i> S·∫£n ph·∫©m
                        </li>
                    </ul>
                    
                </aside>
                <div class="container">
                    <nav class="navbar">
                      <div class="nav-right">
                          <i class="fa-solid fa-bell"></i>
                          <img src="../img/avt.png" alt="User Avatar" class="avatar">
                          <div class="dropdown" id="dropdownMenu" style="display: none; position: absolute; right: 20px; top: 60px; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.2); border-radius: 6px; padding: 10px;">
                            <a href="#" id="logoutBtn" style="text-decoration: none; color: black;">ƒêƒÉng xu·∫•t</a>
                        </div>
                        
                      </div>
                  </nav>
                <main class="content">
                    <h1>S·∫£n ph·∫©m</h1>
                    <button class="btn blue">Th√™m m·ªõi s·∫£n ph·∫©m</button>
                    <div class="actions">
                            <select>
                                <option>L·ªçc theo danh m·ª•c <i class="fa-solid fa-arrow-down"></i></option>
                            </select>
                            <select>
                                <option>L·ªçc theo tr·∫°ng th√°i <i class="fa-solid fa-arrow-down"></i></option>
                            </select>
                            <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m theo t√™n">
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>M√£ s·∫£n ph·∫©n</th>
                                <th>T√™n s·∫£n ph·∫©m</th>
                                <th>Gi√°</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>Gi·∫£m gi√°</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Ch·ª©c nƒÉng</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SP001</td>
                                <td>Iphone 12 Pro</td>
                                <td>12.000.000 ƒë</td>
                                <td>10</td>
                                <td>0%</td>
                                <td class="active">‚óèƒêang ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP002</td>
                                <td>Samsung Galaxy X20</td>
                                <td>21.000.000 ƒë</td>
                                <td>100</td>
                                <td>5%</td>
                                <td class="inactive">‚óèNg·ª´ng ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP003</td>
                                <td>Phone 8 Plus</td>
                                <td>5.000.000 ƒë</td>
                                <td>10</td>
                                <td>0%</td>
                                <td class="active">‚óèƒêang ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP004</td>
                                <td>IPhone 14 Pro max</td>
                                <td>25.000.000 ƒë</td>
                                <td>20</td>
                                <td>2%</td>
                                <td class="inactive">‚óèNg·ª´ng ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP005</td>
                                <td>Oppo X3</td>
                                <td>2.000.000 ƒë</td>
                                <td>10</td>
                                <td>5%</td>
                                <td class="inactive">‚óèNg·ª´ng ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP006</td>
                                <td>Iphone 16</td>
                                <td>20.000.000 ƒë</td>
                                <td>20</td>
                                <td>3%</td>
                                <td class="inactive">‚óèNg·ª´ng ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP007</td>
                                <td>Phone 7 Plus</td>
                                <td>4.000.000 ƒë</td>
                                <td>10</td>
                                <td>4%</td>
                                <td class="active">‚óèƒêang ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>SP008</td>
                                <td>Samsung  S20 Ultra</td>
                                <td>30.000.000 ƒë</td>
                                <td>15</td>
                                <td>2%</td>
                                <td class="inactive">‚óèNg·ª´ng ho·∫°t ƒë·ªông</td>
                                <td>
                                    <i class="fas fa-trash delete"></i>
                                    <i class="fas fa-edit edit"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="pagination">
                        <button>‚Üê</button>
                        <button>1</button>
                        <button>2</button>
                        <button class="active">3</button>
                        <button>4</button>
                        <button>5</button>
                        <button>6</button>
                        <button>7</button>
                        <button>...</button>
                        <button>20</button>
                        <button>‚Üí</button>
                    </div>
                </main>
                <div class="form-container">
                    <h1>Th√™m m·ªõi s·∫£n ph·∫©m</h1>
                    <form>
                        <div class="form-group">
                            <label for="product-code">M√£ s·∫£n ph·∫©m *</label>
                            <input type="text" id="product-code" name="product-code">
                        </div>
                        <div class="form-group">
                            <label for="product-name">T√™n s·∫£n ph·∫©m *</label>
                            <input type="text" id="product-name" name="product-name">
                        </div>
                        <div class="form-group">
                            <label for="category">Danh m·ª•c *</label>
                            <select id="category" name="category">
                                <option value="dien-thoai">ƒêi·ªán tho·∫°i</option>
                                </select>
                        </div>
                        <div class="form-group">
                            <label>Tr·∫°ng th√°i</label>
                            <div class="status-options">
                                <label><input type="radio" name="status" value="active" checked> ƒêang ho·∫°t ƒë·ªông</label>
                                <label><input type="radio" name="status" value="inactive"> Ng·ª´ng ho·∫°t ƒë·ªông</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="quantity">S·ªë l∆∞·ª£ng</label>
                            <input type="number" id="quantity" name="quantity" value="1">
                        </div>
                        <div class="form-group">
                            <label for="price">Gi√°</label>
                            <input type="number" id="price" name="price" value="10000000">
                        </div>
                        <div class="form-group">
                            <label for="discount">Gi·∫£m gi√°</label>
                            <input type="number" id="discount" name="discount" value="10">
                        </div>
                        <div class="form-group">
                            <label>H√¨nh ·∫£nh *</label>
                            <div class="image-upload">
                                <p>Vui l√≤ng ch·ªçn h√¨nh ·∫£nh c√≥ ƒë·ªãnh d·∫°ng .png ho·∫∑c .jpg (k√≠ch th∆∞·ªõc nh·ªè h∆°n ho·∫∑c b·∫±ng 5MB)</p>
                                <input type="file" id="image" name="image" accept="image/png, image/jpeg">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="description">Chi ti·∫øt s·∫£n ph·∫©m</label>
                            <textarea id="description" name="description"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="cancel-button">H·ªßy</button>
                            <button type="submit" class="submit-button">Th√™m</button>
                        </div>
                    </form>
                    
                </div>
        </div>
    </body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
      const addBtn = document.querySelector(".btn.blue");
      const formContainer = document.querySelector(".form-container");
      const overlay = document.querySelector(".overlay");
      const cancelBtn = document.querySelector(".cancel-button");
      const form = formContainer.querySelector("form");
      const productTableBody = document.querySelector("tbody");
      const searchInput = document.querySelector('input[placeholder*="T√¨m ki·∫øm"]');
    
      let products = JSON.parse(localStorage.getItem("products") || "[]");
      let editingIndex = -1;
    
      function renderProducts(list = products) {
        productTableBody.innerHTML = list.map((p, i) => `
          <tr>
            <td>${p.code}</td>
            <td>${p.name}</td>
            <td>${p.price.toLocaleString()} ƒë</td>
            <td>${p.quantity}</td>
            <td>${p.discount}%</td>
            <td class="${p.status === 'active' ? 'active' : 'inactive'}">‚óè${p.status === 'active' ? 'ƒêang ho·∫°t ƒë·ªông' : 'Ng·ª´ng ho·∫°t ƒë·ªông'}</td>
            <td>
              <i class="fas fa-trash delete" data-index="${i}"></i>
              <i class="fas fa-edit edit" data-index="${i}"></i>
            </td>
          </tr>
        `).join("");
      }
      function resetForm() {
        form.reset();
        editingIndex = -1;
      }
      function openForm() {
        formContainer.style.display = "block";
        overlay.style.display = "block";
      }
    
      function closeForm() {
        formContainer.style.display = "none";
        overlay.style.display = "none";
        resetForm();
      }
      addBtn.onclick = () => {
        resetForm();
        openForm();
      };
    
      cancelBtn.onclick = closeForm;
      overlay.onclick = closeForm;
    
      form.onsubmit = function (e) {
        e.preventDefault();
        const formData = new FormData(form);
        const newProduct = {
          code: formData.get("product-code").trim(),
          name: formData.get("product-name").trim(),
          category: formData.get("category"),
          status: formData.get("status"),
          quantity: Number(formData.get("quantity")),
          price: Number(formData.get("price")),
          discount: Number(formData.get("discount")),
          image: formData.get("image")?.name || "",
          description: formData.get("description"),
        };
        if (!newProduct.code || !newProduct.name || newProduct.price <= 0 || newProduct.quantity < 0) {
          alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß v√† h·ª£p l·ªá!");
          return;
        }
        const duplicate = products.some((p, i) =>
          (p.code === newProduct.code || p.name === newProduct.name) && i !== editingIndex
        );
        if (duplicate) {
          alert("M√£ ho·∫∑c t√™n s·∫£n ph·∫©m ƒë√£ t·ªìn t·∫°i!");
          return;
        }
        if (editingIndex === -1) {
          products.push(newProduct);
          alert("ƒê√£ th√™m s·∫£n ph·∫©m!");
        } else {
          products[editingIndex] = newProduct;
          alert("C·∫≠p nh·∫≠t s·∫£n ph·∫©m th√†nh c√¥ng!");
        }
        localStorage.setItem("products", JSON.stringify(products));
        renderProducts();
        closeForm();
      };
      productTableBody.onclick = function (e) {
        const index = e.target.dataset.index;
        if (e.target.classList.contains("edit")) {
          const p = products[index];
          form["product-code"].value = p.code;
          form["product-name"].value = p.name;
          form["category"].value = p.category;
          form["status"].value = p.status;
          form["quantity"].value = p.quantity;
          form["price"].value = p.price;
          form["discount"].value = p.discount;
          form["description"].value = p.description;
          editingIndex = index;
          openForm();
        } else if (e.target.classList.contains("delete")) {
          if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?")) {
            products.splice(index, 1);
            localStorage.setItem("products", JSON.stringify(products));
            renderProducts();
          }
        }
      };
      searchInput.addEventListener("input", function () {
        const keyword = this.value.toLowerCase();
        const filtered = products.filter(p =>
          p.name.toLowerCase().includes(keyword)
        );
        renderProducts(filtered);
      });
      renderProducts();
    });
    document.addEventListener("DOMContentLoaded", () => {
  const avatar = document.querySelector(".avatar");
  const dropdown = document.getElementById("dropdownMenu");
  const logoutBtn = document.getElementById("logoutBtn");

  avatar.addEventListener("click", () => {
    dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
  });
  logoutBtn.addEventListener("click", (e) => {
    e.preventDefault();
    localStorage.removeItem("user");
    window.location.href = "project.html";
  });
  document.addEventListener("click", (e) => {
    if (!avatar.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.style.display = "none";
    }
  });
});

    </script>     
</body>
</html>